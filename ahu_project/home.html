<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø³ÙŠÙ† - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„Ù…Ø±ØªØ¨ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f4f4; margin: 0; transition: 0.3s; }
        header { background: #006400; color: white; padding: 10px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
        .search-bar input { padding: 8px; border-radius: 5px; border: none; width: 250px; }
        
        .categories { background: white; padding: 10px; display: flex; justify-content: center; gap: 10px; border-bottom: 1px solid #ddd; }
        .categories button { border: 1px solid #006400; background: none; padding: 5px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        .categories button:hover { background: #006400; color: white; }

        .container { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; padding: 20px; }
        .product-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: 0.3s; cursor: pointer; border-bottom: 3px solid #B8860B; }
        .product-card:hover { transform: translateY(-5px); }
        .product-info { padding: 15px; text-align: center; }
        .product-price { color: #006400; font-weight: bold; font-size: 18px; }
        
        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        body.dark-mode { background: #1a1a1a; color: white; }
        .dark-mode .product-card { background: #2d2d2d; color: white; }
        .dark-mode .categories { background: #333; }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .toast-notification { position: fixed; bottom: 20px; right: -300px; background: white; color: #333; padding: 15px 20px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); border-right: 5px solid #B8860B; transition: 0.5s; z-index: 9999; }
        .toast-notification.show { right: 20px; }

        /* Ø§Ù„Ø´Ø§Øª */
        .chat-icon { position: fixed; bottom: 20px; left: 20px; background: #006400; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; z-index: 1000; }
        .chat-window { position: fixed; bottom: 90px; left: 20px; width: 300px; background: white; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); display: none; flex-direction: column; overflow: hidden; z-index: 1000; border: 1px solid #ddd; }
   
        /*  Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */ 
    .toast-msg {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 12px 25px;
    border-radius: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 10000;
    display: none;
    animation: fadeInUp 0.5s, fadeOutDown 0.5s 2.5s;
    border-bottom: 3px solid #B8860B;
}

@keyframes fadeInUp { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
@keyframes fadeOutDown { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    
    </style>
</head>
<body>

<header>
    <div class="logo">Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø³ÙŠÙ† ğŸ“</div>
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
        
    </div>
    <div class="wishlist-icon" onclick="window.location.href='wishlist.html'">
    â¤ï¸ <span class="wishlist-count" id="wishlist-count">0</span>
</div>
    <div style="display: flex; gap: 10px; align-items: center;">
        <button id="dark-mode-toggle" style="background: #B8860B; color: white; border: none; padding: 8px; border-radius: 5px; cursor: pointer;">ğŸŒ™</button>
        <a href="add-product.html" style="background: white; color: #006400; padding: 8px; border-radius: 5px; text-decoration: none; font-weight: bold;">+ Ø£Ø¶Ù</a>
        <a href="profile.html" style="color: white; text-decoration: none; font-weight: bold;">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
        <button onclick="logout()" style="background: #ff4d4d; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold;">Ø®Ø±ÙˆØ¬</button>
    </div>
    
</header>

<div class="categories">
    <button onclick="displayProducts('', 'Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</button>
    <button onclick="displayProducts('', 'ÙƒØªØ¨')">ÙƒØªØ¨</button>
    <button onclick="displayProducts('', 'Ø£Ø¯ÙˆØ§Øª')">Ø£Ø¯ÙˆØ§Øª</button>
    <button onclick="displayProducts('', 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª')">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</button>
    <button onclick="displayProducts('', 'Ø§Ø«Ø§Ø«')">Ø§Ø«Ø§Ø«</button>

    <a href="barter.html" style="background: #B8860B; color: white; padding: 10px 20px; border-radius: 20px; text-decoration: none; font-weight: bold;">ğŸ”„ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§ÙŠØ¶Ø©</a>
</div>

<div class="container" id="products-grid"></div>

<div class="chat-icon" onclick="toggleChat()">ğŸ¤–</div>

<div class="chat-window" id="chatWindow">
    <div style="background: #006400; color: white; padding: 15px; font-weight: bold; text-align: center;">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø­Ø³ÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ</div>
    <div id="chatBody" style="height: 250px; padding: 10px; overflow-y: auto; background: #f9f9f9; display: flex; flex-direction: column; font-size: 14px;">
        <div style="background:#eee; padding:8px; border-radius:10px; margin-bottom:10px; align-self: flex-start;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù€ API Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©.. ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯ÙƒØŸ</div>
    </div>
    <div style="display: flex; padding: 10px; border-top: 1px solid #eee;">
        <input type="text" id="chatInput" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ..." style="flex: 1; border: 1px solid #ddd; padding: 8px; border-radius: 5px;">
        <button onclick="sendBotMessage()" style="background: #006400; color: white; border: none; padding: 8px; margin-right: 5px; border-radius: 5px;">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
</div>

<script>
    // 1. Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
    if (localStorage.getItem("isLoggedIn") !== "true") {
        window.location.href = "index.html";
    }

    // 2. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    function getProducts() {
        const baseProducts = [
            { name: "ÙƒØªØ§Ø¨ ÙÙŠØ²ÙŠØ§Ø¡ 101", price: "5.00", phone: "962770000000", category: "ÙƒØªØ¨", img: "https://cdn-icons-png.flaticon.com/512/3429/3429149.png" },
            { name: "Ø·Ù‚Ù… Ù‡Ù†Ø¯Ø³Ø© T-Square", price: "12.00", phone: "962770000000", category: "Ø£Ø¯ÙˆØ§Øª", img: "https://cdn-icons-png.flaticon.com/512/3260/3260170.png" },
            { name: "Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Casio", price: "25.00", phone: "962770000000", category: "Ø£Ø¯ÙˆØ§Øª", img: "https://cdn-icons-png.flaticon.com/512/2344/2344132.png" }
        ];
        const userProducts = JSON.parse(localStorage.getItem('userProducts')) || [];
        return [...baseProducts, ...userProducts];
    }

    // 3. Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ (Ø§Ù„Ø¬Ø°Ø¹ÙŠØ©)
    function goToDetails(name, price, img, phone) {
        localStorage.setItem('p_name', name);
        localStorage.setItem('p_price', price);
        localStorage.setItem('p_img', img);
        localStorage.setItem('p_phone', phone);
        window.location.href = "product-details.html";
    }

    // 4. Ø¯Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
    
    function displayProducts(filterText = "", category = "Ø§Ù„ÙƒÙ„") {
    const grid = document.getElementById('products-grid');
    grid.innerHTML = "";
    const allProducts = getProducts();

    allProducts.forEach(product => {
        const matchSearch = product.name.toLowerCase().includes(filterText.toLowerCase());
        const matchCategory = (category === "Ø§Ù„ÙƒÙ„" || product.category === category);

        if (matchSearch && matchCategory) {
            grid.innerHTML += `
                <div class="product-card" style="position:relative;">
                    
                    <button onclick="toggleWishlist(event, '${product.name}')" style="position:absolute; top:10px; left:10px; z-index:10; background:white; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">â¤ï¸</button>

                    <div onclick="goToDetails('${product.name}', '${product.price}', '${product.img}', '${product.phone}')">
                        <div style="height: 150px; background: white; display: flex; align-items: center; justify-content: center;">
                            <img src="${product.img}" style="max-height: 80%; max-width: 80%;">
                        </div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p class="product-price">${product.price} Ø¯ÙŠÙ†Ø§Ø±</p>
                            <button class="view-btn" style="background:#006400; color:white; border:none; padding:8px; border-radius:5px; width:100%; cursor:pointer;">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                        </div>
                    </div>
                </div>`;
        }
    });
}
    // 5. Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬
    document.getElementById('searchInput').addEventListener('input', (e) => displayProducts(e.target.value));
    document.getElementById('dark-mode-toggle').onclick = () => document.body.classList.toggle('dark-mode');
    function logout() { if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) { localStorage.setItem("isLoggedIn", "false"); window.location.href = "index.html"; } }

    // 6. Ø§Ù„Ø¨ÙˆØª
    function toggleChat() {
        const win = document.getElementById('chatWindow');
        win.style.display = (win.style.display === 'flex') ? 'none' : 'flex';
    }

    function sendBotMessage() {
        const input = document.getElementById('chatInput');
        const body = document.getElementById('chatBody');
        const msg = input.value.trim().toLowerCase();
        if(!msg) return;

        body.innerHTML += `<div style="align-self: flex-end; background: #006400; color: white; padding: 8px; border-radius: 10px; margin-bottom: 10px;">${msg}</div>`;
        input.value = "";

        setTimeout(() => {
            const all = getProducts();
            const found = all.filter(p => p.name.toLowerCase().includes(msg) || p.price.toString() === msg);
            let reply = found.length > 0 ? `Ù„Ù‚ÙŠØª Ù„Ùƒ: ${found.map(f => f.name).join(" Ùˆ ")}` : "Ù„Ù… Ø£Ø¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø­Ø§Ù„ÙŠØ§Ù‹.";
            if(msg.includes("Ù…ÙƒØªØ¨Ø©")) reply = "ğŸ“¡ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ API Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©...";
            
            body.innerHTML += `<div style="align-self: flex-start; background: #eee; padding: 8px; border-radius: 10px; margin-bottom: 10px; border-right: 4px solid #B8860B;">${reply}</div>`;
            body.scrollTop = body.scrollHeight;
        }, 700);
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
    const notifications = ["ğŸ›’ Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ù…Ø¶Ø§Ù Ø§Ù„Ø¢Ù†", "ğŸ”¥ Ù‚Ø³Ù… Ø§Ù„ÙƒØªØ¨ Ø¹Ù„ÙŠÙ‡ Ø¶ØºØ· ÙƒØ¨ÙŠØ±", "âœ… ØªÙ… Ø¨ÙŠØ¹ Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­"];
    setInterval(() => {
        const toast = document.createElement('div');
        toast.className = 'toast-notification';
        toast.innerText = notifications[Math.floor(Math.random() * notifications.length)];
        document.body.appendChild(toast);
        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 500); }, 4000);
    }, 20000);

    displayProducts(); // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
</script>

<style>
/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± */
.wishlist-icon { position: relative; cursor: pointer; font-size: 20px; }
.wishlist-count { 
    position: absolute; top: -10px; right: -10px; 
    background: #ff4d4d; color: white; border-radius: 50%; 
    padding: 2px 6px; font-size: 10px; font-weight: bold; 
}

/* Ø²Ø± Ø§Ù„Ù‚Ù„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ±Øª */
.heart-btn {
    position: absolute; top: 10px; left: 10px;
    background: white; border: none; border-radius: 50%;
    width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;
    cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: 0.3s; z-index: 10;
}
.heart-btn.active { color: #ff4d4d; transform: scale(1.2); }</style>



<script>
function toggleWishlist(event, productName) {
    event.stopPropagation(); // Ù…Ù†Ø¹ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø¹Ù†Ø¯ Ø¶ØºØ· Ø§Ù„Ù‚Ù„Ø¨
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    
    if (wishlist.includes(productName)) {
        wishlist = wishlist.filter(name => name !== productName);
    } else {
        wishlist.push(productName);
    }
    
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    updateWishlistCount();
}

function updateWishlistCount() {
    const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    document.getElementById('wishlist-count').innerText = wishlist.length;
}

// Ù†Ø§Ø¯Ù Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
updateWishlistCount();
</script>



<script>
function toggleWishlist(event, productName) {
    event.stopPropagation(); // ÙŠÙ…Ù†Ø¹ ÙØªØ­ ØµÙØ­Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    
    if (wishlist.includes(productName)) {
        wishlist = wishlist.filter(name => name !== productName);
        showToast("âŒ ØªÙ…Øª Ø§Ù„Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©"); // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø°ÙƒÙŠØ©
    } else {
        wishlist.push(productName);
        showToast("â¤ï¸ ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©"); // Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø°ÙƒÙŠØ©
    }
    
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    updateWishlistCount();
}
</script>



<div id="toast" style="display: none; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 12px 25px; border-radius: 30px; z-index: 10000; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border-bottom: 3px solid #B8860B; font-weight: bold; transition: 0.5s;"></div>

<script>
// Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„ÙŠ Ø¨ØªØ´ØºÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
function showToast(text) {
    const toast = document.getElementById('toast');
    toast.innerText = text;
    toast.style.display = 'block';
    
    // ØªØ®ØªÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
    setTimeout(() => {
        toast.style.display = 'none';
    }, 2000);
}
</script>







<!-- 
/* --- ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ø¨ØµÙØ­Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© --- 


<div id="chat-system" style="max-width: 400px; margin: 20px auto; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.2); font-family: sans-serif;">
    <div style="background: #075e54; color: white; padding: 10px 15px; display: flex; align-items: center; gap: 10px;">
        <div style="width: 10px; height: 10px; background: #25d366; border-radius: 50%;"></div>
        <strong>Ø¯Ø±Ø¯Ø´Ø© Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø³ÙŠÙ† (Ù…Ø¨Ø§Ø´Ø±)</strong>
    </div>

    <div id="chatWindow" style="height: 200px; background: #e5ddd5; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px;">
        </div>

    <div style="background: #f0f0f0; padding: 10px; display: flex; gap: 5px;">
        <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." style="flex: 1; border: none; padding: 10px; border-radius: 20px; outline: none;">
        <button onclick="sendMessage()" style="background: #075e54; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">â¤</button>
    </div>
</div>

<script>// Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¹Ø´Ø§Ù† Ù†ÙØµÙ„ Ù…Ø­Ø§Ø¯Ø«Ø§Øª ÙƒÙ„ Ù…Ù†ØªØ¬ Ø¹Ù† Ø§Ù„Ø«Ø§Ù†ÙŠ
const currentProductName = localStorage.getItem('p_name') || "Ø¹Ø§Ù…";

function loadMessages() {
    const chatWindow = document.getElementById('chatWindow');
    // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬
    const messages = JSON.parse(localStorage.getItem('chat_' + currentProductName)) || [];
    
    chatWindow.innerHTML = "";
    messages.forEach(msg => {
        const isMe = msg.sender === "Ø£Ù†Ø§";
        chatWindow.innerHTML += `
            <div style="align-self: ${isMe ? 'flex-end' : 'flex-start'}; 
                        background: ${isMe ? '#dcf8c6' : 'white'}; 
                        padding: 8px 12px; 
                        border-radius: 10px; 
                        max-width: 80%; 
                        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
                        position: relative;">
                <p style="margin: 0; font-size: 14px;">${msg.text}</p>
                <small style="font-size: 10px; color: gray; display: block; text-align: left; margin-top: 3px;">${msg.time}</small>
            </div>
        `;
    });
    chatWindow.scrollTop = chatWindow.scrollHeight;
}

function sendMessage() {
    const input = document.getElementById('chatInput');
    if (input.value.trim() === "") return;

    const messages = JSON.parse(localStorage.getItem('chat_' + currentProductName)) || [];
    const now = new Date();
    const time = now.getHours() + ":" + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();

    const newMsg = {
        text: input.value,
        sender: "Ø£Ù†Ø§", // ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ø¨Ù†Ø­Ø· Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
        time: time
    };

    messages.push(newMsg);
    localStorage.setItem('chat_' + currentProductName, JSON.stringify(messages));
    
    input.value = "";
    loadMessages(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø´Ø©
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø´Ø§Øª Ø¨Ù…Ø¬Ø±Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', loadMessages);
</script> */*
 -->






















</body>
</html>